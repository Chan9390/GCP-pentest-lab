# GCP-pentest-lab
A vulnerable environment for exploring common GCP misconfigurations and vulnerabilities

![image](https://github.com/lacioffi/GCP-pentest-lab/assets/18557205/e348d414-0406-478d-ab74-45fb05bfe5fd)


# Running the lab
To create the lab, you must first create a GCP project with an associated billing account.
Afterwards, just run `terraform apply` inside this folder. When asked, input your [project's ID](https://support.google.com/googleapi/answer/7014113?hl=en).

## Manual tasks (for now):
After provisioning your environment, two additional tasks need to be completed manually (for now, because this is still in beta!)
- Generate a JSON key for the `sync-sa` Service Account and put it in the dev-bucket
- Inside the `app.py` file, change the bucket variables to point to the created buckets. 
- Inside the VM: install python3 and flask, import the app.py file and the templates, then leave the app running (`python3 app.py`). You can install it anywhere, but i suggest creating a folder inside `/etc/`

# How to Play
After your environment is entirely provisioned, you can start the game by accessing the webserver.

This is a "black box" CTF. Reading anything inside this project source files is "cheating", and so is using any privileged account inside your GCP project you already have. You're supposed to start as a random user without any privileges, and go from there.

# Flags 
There are five flags in total (for now).
The flags are short texts that indicate they are a flag (e.g.: "Hey you found me, i'm flag #1!"). They can be embedded in other files or be a file of their own.

### Flag 1 ###
Flag 1 is in an open bucket.

### Flag 2 ###
Flag 2 is in another bucket, but this one isn't public :)

### Flag 3 ###
Flag 3 is sitting inside some source-code.

### Flag 4 ###
Flag 4 should be inside a database, but isn't finished yet.
PLZ IGNORE!

### Flag 5 ###
Flag 5 is inside some instance, but isn't a file!

### Flag 6 ###
Flag 6 is in yet another bucket, but this one is the most restricted yet!